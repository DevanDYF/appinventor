<!DOCTYPE html>
<html>
<head>
    <title>Canvas Line Chart</title>
    <style>
        #chartCanvas {
            width: 900px;
            height: 500px;
            background-color: #f8f8f8;
        }
    </style>
</head>
<body>
    <canvas id="chartCanvas" width="900" height="500"></canvas>
    <script>
        var allData = new Array(100).fill(0); // 存储数据的数组
        var currentIndex = 0; // 当前数据点的索引

        function drawLineChart() {
            var canvas = document.getElementById('chartCanvas');
            if (canvas.getContext) {
                var ctx = canvas.getContext('2d');
                
                // 清除画布
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // 绘制图表
                ctx.beginPath();
                var sliceWidth = canvas.width * 1.0 / allData.length;
                var x = 0;
                for (var i = 0; i < allData.length; i++) {
                    var v = allData[i];
                    var y = canvas.height - (v / 100) * canvas.height; // 假设数据范围为0-100
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    x += sliceWidth;
                }
                ctx.stroke();
            }
        }

        function addData(data) {
            allData[currentIndex] = data;
            currentIndex = (currentIndex + 1) % allData.length; // 环形数组逻辑
            drawLineChart();
        }

        // 测试用，每200ms更新一次数据
        setInterval(function() {
            var newData = Math.random() * 100; // 生成一个0到100之间的随机数
            addData(newData);
        }, 200);
    </script>
</body>
</html>
